<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Can Yaman Tokat SimÃ¼latorÃ¼</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            background-color: #2c3e50;
            color: white;
            margin: 0;
            padding: 20px 0;
            overflow: hidden;
            touch-action: manipulation; 
        }

        h1 { margin-bottom: 10px; text-align: center;}

        .score-board {
            font-size: 24px;
            margin-bottom: 40px;
            background: #e74c3c;
            padding: 10px 25px;
            border-radius: 15px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.3);
        }

        /* Oyun AlanÄ± */
        .game-area {
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 40px;
            width: 300px;
            height: 300px;
        }


        .hand {
            font-size: 130px; 
            position: absolute;
            z-index: 10;
            opacity: 0.9; 
            top: 50%;
            margin-top: -65px; 
            transition: transform 0.1s;
        }

        .left-hand {
            left: -70px;
            transform: scaleX(-1);
        }

        .right-hand {
            right: -70px;
        }

        /* YÃ¼z FotoÄŸrafÄ± */
        #target-image {
            width: 300px;
            height: 300px;
            object-fit: cover;
            border-radius: 50%;
            box-shadow: 0 10px 20px rgba(0,0,0,0.5);
            user-select: none;
            -webkit-user-drag: none;
            z-index: 5;
            background-color: #34495e;
            transition: transform 0.1s;
        }

        /* Tokatlama Butonu */
        .slap-button {
            background-color: #f1c40f;
            color: #d35400;
            border: none;
            padding: 15px 50px;
            font-size: 32px;
            font-weight: bold;
            border-radius: 60px;
            cursor: pointer;
            box-shadow: 0 8px 0 #d35400, 0 15px 20px rgba(0,0,0,0.4);
            transition: all 0.1s;
            text-transform: uppercase;
            outline: none;
            -webkit-tap-highlight-color: transparent;
        }

        .slap-button:active {
            transform: translateY(8px);
            box-shadow: 0 0px 0 #d35400, 0 5px 10px rgba(0,0,0,0.4);
        }

        .shake {
            animation: shake 0.4s cubic-bezier(.36,.07,.19,.97) both;
        }

        @keyframes shake {
            10%, 90% { transform: translate3d(-3px, 0, 0) rotate(-2deg); }
            20%, 80% { transform: translate3d(6px, 0, 0) rotate(4deg); }
            30%, 50%, 70% { transform: translate3d(-12px, 0, 0) rotate(-6deg); }
            40%, 60% { transform: translate3d(12px, 0, 0) rotate(6deg); }
        }

        .slap-left-anim {
            animation: slapLeft 0.2s ease-out;
        }
        @keyframes slapLeft {
            0% { left: -70px; transform: scaleX(-1) rotate(0deg); }
            50% { left: 50px; transform: scaleX(-1) rotate(-25deg); }
            100% { left: -70px; transform: scaleX(-1) rotate(0deg); }
        }

        .slap-right-anim {
            animation: slapRight 0.2s ease-out;
        }
        @keyframes slapRight {
            0% { right: -70px; transform: rotate(0deg); }
            50% { right: 50px; transform: rotate(-25deg); } 
            100% { right: -70px; transform: rotate(0deg); }
        }


        .slap-text-container {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none;
            z-index: 20;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .slap-text {
            position: absolute;
            font-size: 30px;
            font-weight: 900;
            color: #ff3838;
            text-shadow: 3px 3px 0px #fff, -2px -2px 0px #000;
            animation: popOut 0.6s ease-out forwards;
            white-space: nowrap;
        }

        @keyframes popOut {
            0% { opacity: 1; transform: scale(0.5) translateY(20px) rotate(0deg); }
            50% { transform: scale(1.8) translateY(-40px) rotate(10deg); }
            100% { opacity: 0; transform: scale(1.2) translateY(-80px) rotate(20deg); }
        }
    </style>
</head>
<body>

    <h2 style="margin-top:3px; margin-bottom: 0px;">Can YamanðŸ‘‹</h2>
    <h3 style="margin-top:0px; padding-top: 0px;">Tokat SimÃ¼latÃ¶rÃ¼ v1</h3>
    <div class="score-board">Skor: <span id="score">0</span></div>

    <div class="game-area" id="game-area">
        <div class="hand left-hand" id="left-hand">ðŸ¤š</div>
        <img src="images.webp" id="target-image" alt="Hedef">
        <div class="hand right-hand" id="right-hand">ðŸ¤š</div>
        <div class="slap-text-container" id="text-container"></div>
    </div>

    <button id="slap-btn" class="slap-button">Tokatla!</button>

    <img style="margin-top: 30px; margin-bottom: 10px; width: 60px; border-radius: 50%;
    box-shadow: 0 10px 20px rgba(0, 0, 0, 0.5);" src="sudo.jpg" id="" alt="Sudo">
    <h4 style="margin-top: 0px;">&copy SUDO Games</h4>


    <script>

        const normalImageSrc = "images.webp";
        const cryingImageSrc = "crying-image.png"; 
        const reactionDuration = 800; 

        let score = 0;
        let reactionTimeout;

        const targetImage = document.getElementById('target-image');
        const scoreDisplay = document.getElementById('score');
        const slapBtn = document.getElementById('slap-btn');
        const leftHand = document.getElementById('left-hand');
        const rightHand = document.getElementById('right-hand');
        const textContainer = document.getElementById('text-container');

        // Resimleri Ã¶nceden yÃ¼kle
        const imgPreload1 = new Image(); imgPreload1.src = normalImageSrc;
        const imgPreload2 = new Image(); imgPreload2.src = cryingImageSrc;

        // --- Ses Efekti (Web Audio API) ---
        const AudioContext = window.AudioContext || window.webkitAudioContext;
        let audioCtx;
        let soundEnabled = false;

        async function ensureAudioReady() {
            if (!AudioContext) return;
            if (!audioCtx) audioCtx = new AudioContext();
            if (audioCtx.state !== 'running') {
                try {
                    await audioCtx.resume();
                } catch (err) {
                    soundEnabled = false;
                    return;
                }
            }
            soundEnabled = audioCtx.state === 'running';
        }

        function playSlapSound() {
            if (!soundEnabled || !audioCtx) return;
            const bufferSize = audioCtx.sampleRate * 0.15;
            const buffer = audioCtx.createBuffer(1, bufferSize, audioCtx.sampleRate);
            const data = buffer.getChannelData(0);
            for (let i = 0; i < bufferSize; i++) { data[i] = Math.random() * 2 - 1; }
            const noise = audioCtx.createBufferSource();
            noise.buffer = buffer;
            const gainNode = audioCtx.createGain();
            const filter = audioCtx.createBiquadFilter();
            filter.type = 'lowpass';
            filter.frequency.value = 1500;
            gainNode.gain.setValueAtTime(1.2, audioCtx.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.001, audioCtx.currentTime + 0.15);
            noise.connect(filter); filter.connect(gainNode); gainNode.connect(audioCtx.destination);
            noise.start();
        }

        // --- Ana Oyun DÃ¶ngÃ¼sÃ¼ ---
        slapBtn.addEventListener('pointerdown', async (e) => {
            e.preventDefault();
            await ensureAudioReady();
            handleSlap();
        });

        function handleSlap() {
            score++;
            scoreDisplay.textContent = score;
            playSlapSound();

            targetImage.src = cryingImageSrc;
            clearTimeout(reactionTimeout);
            reactionTimeout = setTimeout(() => {
                targetImage.src = normalImageSrc;
            }, reactionDuration);

            const isLeft = Math.random() > 0.5;
            resetAnimations();
            targetImage.classList.add('shake');

            if (isLeft) {
                leftHand.classList.add('slap-left-anim');
                createSlapText('left');
            } else {
                rightHand.classList.add('slap-right-anim');
                createSlapText('right');
            }
        }

        function resetAnimations() {
            targetImage.classList.remove('shake');
            leftHand.classList.remove('slap-left-anim');
            rightHand.classList.remove('slap-right-anim');
            void targetImage.offsetWidth; 
        }

        function createSlapText(side) {
            const effect = document.createElement('div');
            effect.classList.add('slap-text');
            const texts = ["ÅžRAK!","SANDOKAN!", "Ã‡AAAT!", "GÃœM!", "EL TURCO!", "Ã‡AAAT!", "ERKENCÄ° KUÅž!"];
            effect.innerText = texts[Math.floor(Math.random() * texts.length)];
            const offset = side === 'left' ? '-80px' : '80px';
            effect.style.marginLeft = offset;
            textContainer.appendChild(effect);
            setTimeout(() => { effect.remove(); }, 600);
        }
    </script>

</body>
</html>
